{{- $borderClass := "hx-mt-8 hx-border-t" -}}

{{- $pages := partial "utils/sort-pages" (dict "page" . "by"
site.Params.blog.list.sortBy "weight" site.Params.blog.list.sortOrder) -}}


{{- range $pages }}
{{- $title := .Params.Title -}}
  <div class="card-carousel">
    <div class="carousel__header">
      <h2 class="carousel__headline">{{ $title }}</h2>
      <div class="carousel__tags">
        <a href="/tags/" class="carousel__tag">View All</a>          
        </div>
        <div class="carousel__controls">
          <button
            class="carousel__arrow arrow-prev"
            aria-label="Previous"
          ></button>
          <button class="carousel__arrow arrow-next" aria-label="Next"></button>
        </div>
      </div>
      <div class="carousel__content">
        <ul class="carousel__list">
          {{/*  {{- range where .Site.RegularPages "Params.series" "intersect" (slice $title) }}  */}}
{{/*  {{- range $pages }}  */}}
{{/*  <li class="carousel__item">
  <a href="{{ .RelPermalink }}" class="carousel__link">
    {{- if .Params.image }}
    <img
      src="{{ .Params.image }}"
      alt="{{ .Title }}"
      class="carousel__image"
    />
    {{- else }}
    <img
      src="https://via.placeholder.com/150"
      alt="Placeholder Image"
      class="carousel__image"
    />
    {{- end }}
    <div class="carousel__description">
      <h3 class="carousel__title">{{ .Title }}</h3>
    </div>
  </a>
</li>  */}}
{{/*  {{- end }}  */}}
 {{/*  {{- end }}  */}}
         {{ partial "horizontal-card.html" . }}
         {{/*  {{ partial "horizontal-card.html" (dict "context" . "seriesTitle" $title) }}     */}}
             </ul>
    </div>
    <hr class="{{$borderClass}} dark:hx-border-neutral-800 contrast-more:hx-border-t contrast-more:hx-border-neutral-400 contrast-more:hx-shadow-none contrast-more:dark:hx-border-neutral-400">
</div>
{{ end -}}

  <style>
    .card-carousel {
      padding: 16px;
      border-radius: 8px;
    }                           

    .carousel__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .carousel__headline {
      font-size: 1.5rem;
      font-weight: bold;
      color: #fff;
    }

    .carousel__tag {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      text-decoration: none;
      font-size: 0.8rem;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .carousel__tag:hover {
      background: rgba(255, 255, 255, 0.3);
      color: #000;
    }
    .carousel__controls {
      display: flex;
      gap: 8px;
    }

    .carousel__arrow {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .carousel__arrow:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .carousel__arrow:before {
      content: "";
      display: block;
      width: 12px;
      height: 12px;
      background-size: contain;
      background-repeat: no-repeat;
    }

    .arrow-prev:before {
      background-image: url("/images/utils/right-arrow.svg"); /* Add left arrow SVG */
      rotate: 180deg; /* Rotate for left arrow */
    }

    .arrow-next:before {
      background-image: url("/images/utils/right-arrow.svg"); /* Add right arrow SVG */
    }

    .carousel__content {
      overflow-x: auto;
      display: flex;
      gap: 16px;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .carousel__content::-webkit-scrollbar {
      display: none;
    }

    .carousel__list {
      display: flex;
      gap: 16px;
      padding: 0;
      margin: 0;
      list-style: none;
    }

    .carousel__item {
      flex: 0 0 auto;
      width: 150px;
    }

    .carousel__link {
      display: block;
      text-decoration: none;
      color: inherit;
    }

    .carousel__image {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .carousel__title {
      font-size: 0.9rem;
      font-weight: bold;
      color: #fff;
      text-align: center;
    }
  </style>

  {{/*  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const carouselContent = document.querySelector(".carousel__content");
      const prevButton = document.querySelector(".arrow-prev");
      const nextButton = document.querySelector(".arrow-next");

      const scrollAmount = 150; // Adjust scroll amount as needed

      prevButton.addEventListener("click", function () {
        carouselContent.scrollBy({
          left: -scrollAmount,
          behavior: "smooth",
        });
      });

      nextButton.addEventListener("click", function () {
        carouselContent.scrollBy({
          left: scrollAmount,
          behavior: "smooth",
        });
      });
    });
  </script>  */}}
</div>
